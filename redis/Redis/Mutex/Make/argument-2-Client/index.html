<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Client (redis.Redis.Mutex.Make.2-Client)</title><link rel="stylesheet" href="../../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../index.html">redis</a> &#x00BB; <a href="../../../index.html">Redis</a> &#x00BB; <a href="../../index.html">Mutex</a> &#x00BB; <a href="../index.html">Make</a> &#x00BB; 2-Client</nav><header class="odoc-preamble"><h1>Parameter <code><span>Make.2-Client</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#types-and-exceptions">Types and exceptions</a></li><li><a href="#connection-handling">Connection handling</a></li><li><a href="#connection-commands">Connection commands</a></li><li><a href="#keys-commands">Keys commands</a></li><li><a href="#string-commands">String commands</a></li><li><a href="#hash-commands">Hash commands</a></li><li><a href="#list-commands">List commands</a></li><li><a href="#hyperloglog-commands">HyperLogLog commands</a></li><li><a href="#set-commands">Set commands</a></li><li><a href="#pub/sub-commands">Pub/sub commands</a></li><li><a href="#sorted-set-commands">Sorted set commands</a></li><li><a href="#stream-commands">Stream commands</a></li><li><a href="#transaction-commands">Transaction commands</a></li><li><a href="#scripting-commands">Scripting commands</a></li><li><a href="#server">Server</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec module" id="module-IO" class="anchored"><a href="#module-IO" class="anchor"></a><code><span><span class="keyword">module</span> </span><span>IO</span><span> = <a href="../argument-1-IO/index.html">IO</a></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-StringBound" class="anchored"><a href="#module-StringBound" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="StringBound/index.html">StringBound</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-FloatBound" class="anchored"><a href="#module-FloatBound" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="FloatBound/index.html">FloatBound</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h3 id="types-and-exceptions"><a href="#types-and-exceptions" class="anchor"></a>Types and exceptions</h3><div class="odoc-spec"><div class="spec type" id="type-redirection" class="anchored"><a href="#type-redirection" class="anchor"></a><code><span><span class="keyword">type</span> redirection</span><span> = </span><span>{</span></code><table><tr id="type-redirection.slot" class="anchored"><td class="def record field"><a href="#type-redirection.slot" class="anchor"></a><code><span>slot : int;</span></code></td></tr><tr id="type-redirection.host" class="anchored"><td class="def record field"><a href="#type-redirection.host" class="anchor"></a><code><span>host : string;</span></code></td></tr><tr id="type-redirection.port" class="anchored"><td class="def record field"><a href="#type-redirection.port" class="anchor"></a><code><span>port : int;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-reply" class="anchored"><a href="#type-reply" class="anchor"></a><code><span><span class="keyword">type</span> reply</span><span> = </span><span>[ </span></code><table><tr id="type-reply.Status" class="anchored"><td class="def constructor"><a href="#type-reply.Status" class="anchor"></a><code><span>| </span></code><code><span>`Status <span class="keyword">of</span> string</span></code></td></tr><tr id="type-reply.Error" class="anchored"><td class="def constructor"><a href="#type-reply.Error" class="anchor"></a><code><span>| </span></code><code><span>`Error <span class="keyword">of</span> string</span></code></td></tr><tr id="type-reply.Int" class="anchored"><td class="def constructor"><a href="#type-reply.Int" class="anchor"></a><code><span>| </span></code><code><span>`Int <span class="keyword">of</span> int</span></code></td></tr><tr id="type-reply.Int64" class="anchored"><td class="def constructor"><a href="#type-reply.Int64" class="anchor"></a><code><span>| </span></code><code><span>`Int64 <span class="keyword">of</span> <span class="xref-unresolved">Stdlib</span>.Int64.t</span></code></td></tr><tr id="type-reply.Bulk" class="anchored"><td class="def constructor"><a href="#type-reply.Bulk" class="anchor"></a><code><span>| </span></code><code><span>`Bulk <span class="keyword">of</span> <span>string option</span></span></code></td></tr><tr id="type-reply.Multibulk" class="anchored"><td class="def constructor"><a href="#type-reply.Multibulk" class="anchor"></a><code><span>| </span></code><code><span>`Multibulk <span class="keyword">of</span> <span><a href="#type-reply">reply</a> list</span></span></code></td></tr><tr id="type-reply.Ask" class="anchored"><td class="def constructor"><a href="#type-reply.Ask" class="anchor"></a><code><span>| </span></code><code><span>`Ask <span class="keyword">of</span> <a href="#type-redirection">redirection</a></span></code></td></tr><tr id="type-reply.Moved" class="anchored"><td class="def constructor"><a href="#type-reply.Moved" class="anchor"></a><code><span>| </span></code><code><span>`Moved <span class="keyword">of</span> <a href="#type-redirection">redirection</a></span></code></td></tr></table><code><span> ]</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-string_of_reply" class="anchored"><a href="#val-string_of_reply" class="anchor"></a><code><span><span class="keyword">val</span> string_of_reply : <span><a href="#type-reply">reply</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>For debugging purpose</p></div></div><div class="odoc-spec"><div class="spec type" id="type-connection_spec" class="anchored"><a href="#type-connection_spec" class="anchor"></a><code><span><span class="keyword">type</span> connection_spec</span><span> = </span><span>{</span></code><table><tr id="type-connection_spec.host" class="anchored"><td class="def record field"><a href="#type-connection_spec.host" class="anchor"></a><code><span>host : string;</span></code></td></tr><tr id="type-connection_spec.port" class="anchored"><td class="def record field"><a href="#type-connection_spec.port" class="anchor"></a><code><span>port : int;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Server connection info</p></div></div><div class="odoc-spec"><div class="spec value" id="val-connection_spec" class="anchored"><a href="#val-connection_spec" class="anchor"></a><code><span><span class="keyword">val</span> connection_spec : <span>?port:int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-connection_spec">connection_spec</a></span></code></div><div class="spec-doc"><p>Create a connection spec with the given host.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">port</span> <p>port to connect to (default <code>6379</code>)</p></li></ul><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.5</li></ul></div></div><div class="odoc-spec"><div class="spec module" id="module-SlotMap" class="anchored"><a href="#module-SlotMap" class="anchor"></a><code><span><span class="keyword">module</span> </span><span>SlotMap</span><span> : <span class="xref-unresolved">Stdlib</span>.Map.S <span class="keyword">with</span> <span><span class="keyword">type</span> <span class="xref-unresolved">key</span> = <span class="xref-unresolved">int</span></span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-ConnectionSpecMap" class="anchored"><a href="#module-ConnectionSpecMap" class="anchor"></a><code><span><span class="keyword">module</span> </span><span>ConnectionSpecMap</span><span> : <span class="xref-unresolved">Stdlib</span>.Map.S <span class="keyword">with</span> <span><span class="keyword">type</span> <span class="xref-unresolved">key</span> = <span class="xref-unresolved">connection_spec</span></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-cluster_connections" class="anchored"><a href="#type-cluster_connections" class="anchor"></a><code><span><span class="keyword">type</span> cluster_connections</span><span> = <span class="keyword">private</span> </span><span>{</span></code><table><tr id="type-cluster_connections.connections_spec" class="anchored"><td class="def record field"><a href="#type-cluster_connections.connections_spec" class="anchor"></a><code><span><span class="keyword">mutable</span> connections_spec : <span><a href="#type-connection_spec">connection_spec</a> <span class="xref-unresolved">SlotMap</span>.t</span>;</span></code></td></tr><tr id="type-cluster_connections.connections" class="anchored"><td class="def record field"><a href="#type-cluster_connections.connections" class="anchor"></a><code><span><span class="keyword">mutable</span> connections : <span><a href="#type-connection">connection</a> <span class="xref-unresolved">ConnectionSpecMap</span>.t</span>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-connection" class="anchored"><a href="#type-connection" class="anchor"></a><code><span><span class="keyword">and</span> connection</span><span> = <span class="keyword">private</span> </span><span>{</span></code><table><tr id="type-connection.fd" class="anchored"><td class="def record field"><a href="#type-connection.fd" class="anchor"></a><code><span>fd : <a href="../argument-1-IO/index.html#type-fd">IO.fd</a>;</span></code></td></tr><tr id="type-connection.in_ch" class="anchored"><td class="def record field"><a href="#type-connection.in_ch" class="anchor"></a><code><span>in_ch : <a href="../argument-1-IO/index.html#type-in_channel">IO.in_channel</a>;</span></code></td></tr><tr id="type-connection.out_ch" class="anchored"><td class="def record field"><a href="#type-connection.out_ch" class="anchor"></a><code><span>out_ch : <a href="../argument-1-IO/index.html#type-out_channel">IO.out_channel</a>;</span></code></td></tr><tr id="type-connection.stream" class="anchored"><td class="def record field"><a href="#type-connection.stream" class="anchor"></a><code><span>stream : <span><span><a href="#type-reply">reply</a> list</span> <a href="../argument-1-IO/index.html#type-stream">IO.stream</a></span>;</span></code></td></tr><tr id="type-connection.cluster" class="anchored"><td class="def record field"><a href="#type-connection.cluster" class="anchor"></a><code><span>cluster : <a href="#type-cluster_connections">cluster_connections</a>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Redis_error" class="anchored"><a href="#exception-Redis_error" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Redis_error</span> <span class="keyword">of</span> string</span></code></div><div class="spec-doc"><p>Error responses from server</p></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Unexpected" class="anchored"><a href="#exception-Unexpected" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Unexpected</span> <span class="keyword">of</span> <a href="#type-reply">reply</a></span></code></div><div class="spec-doc"><p>Protocol errors</p></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Unrecognized" class="anchored"><a href="#exception-Unrecognized" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Unrecognized</span> <span class="keyword">of</span> string * string</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-bit_operation" class="anchored"><a href="#type-bit_operation" class="anchor"></a><code><span><span class="keyword">type</span> bit_operation</span><span> = </span></code><table><tr id="type-bit_operation.AND" class="anchored"><td class="def variant constructor"><a href="#type-bit_operation.AND" class="anchor"></a><code><span>| </span><span><span class="constructor">AND</span></span></code></td></tr><tr id="type-bit_operation.OR" class="anchored"><td class="def variant constructor"><a href="#type-bit_operation.OR" class="anchor"></a><code><span>| </span><span><span class="constructor">OR</span></span></code></td></tr><tr id="type-bit_operation.XOR" class="anchored"><td class="def variant constructor"><a href="#type-bit_operation.XOR" class="anchor"></a><code><span>| </span><span><span class="constructor">XOR</span></span></code></td></tr><tr id="type-bit_operation.NOT" class="anchored"><td class="def variant constructor"><a href="#type-bit_operation.NOT" class="anchor"></a><code><span>| </span><span><span class="constructor">NOT</span></span></code></td></tr></table></div><div class="spec-doc"><p>Possible BITOP operations</p></div></div><h3 id="connection-handling"><a href="#connection-handling" class="anchor"></a>Connection handling</h3><div class="odoc-spec"><div class="spec value" id="val-connect" class="anchored"><a href="#val-connect" class="anchor"></a><code><span><span class="keyword">val</span> connect : <span><a href="#type-connection_spec">connection_spec</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-connection">connection</a> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-disconnect" class="anchored"><a href="#val-disconnect" class="anchor"></a><code><span><span class="keyword">val</span> disconnect : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-with_connection" class="anchored"><a href="#val-with_connection" class="anchor"></a><code><span><span class="keyword">val</span> with_connection : <span><a href="#type-connection_spec">connection_spec</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-stream" class="anchored"><a href="#val-stream" class="anchor"></a><code><span><span class="keyword">val</span> stream : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-reply">reply</a> list</span> <a href="../argument-1-IO/index.html#type-stream">IO.stream</a></span></span></code></div></div><h3 id="connection-commands"><a href="#connection-commands" class="anchor"></a>Connection commands</h3><div class="odoc-spec"><div class="spec value" id="val-auth" class="anchored"><a href="#val-auth" class="anchor"></a><code><span><span class="keyword">val</span> auth : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Authenticate to server.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-auth_acl" class="anchored"><a href="#val-auth_acl" class="anchor"></a><code><span><span class="keyword">val</span> auth_acl : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Authenticate to server with username and password.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-echo" class="anchored"><a href="#val-echo" class="anchor"></a><code><span><span class="keyword">val</span> echo : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Echo given string.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-ping" class="anchored"><a href="#val-ping" class="anchor"></a><code><span><span class="keyword">val</span> ping : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Ping connection; returns <code> true </code> if ping was successfull.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-quit" class="anchored"><a href="#val-quit" class="anchor"></a><code><span><span class="keyword">val</span> quit : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Close connection.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-select" class="anchored"><a href="#val-select" class="anchor"></a><code><span><span class="keyword">val</span> select : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Switch to a different db; raises <code>Error</code> if index is invalid.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sentinel_masters" class="anchored"><a href="#val-sentinel_masters" class="anchor"></a><code><span><span class="keyword">val</span> sentinel_masters : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span><span>(string * string)</span> list</span> list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>SENTINEL commands</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sentinel_get_master_addr_by_name" class="anchored"><a href="#val-sentinel_get_master_addr_by_name" class="anchor"></a><code><span><span class="keyword">val</span> sentinel_get_master_addr_by_name : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><span>(string * string)</span> option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div></div><h3 id="keys-commands"><a href="#keys-commands" class="anchor"></a>Keys commands</h3><div class="odoc-spec"><div class="spec value" id="val-del" class="anchored"><a href="#val-del" class="anchor"></a><code><span><span class="keyword">val</span> del : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Delete a key; returns the number of keys removed.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-exists" class="anchored"><a href="#val-exists" class="anchor"></a><code><span><span class="keyword">val</span> exists : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Determine if a key exists.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-expire" class="anchored"><a href="#val-expire" class="anchor"></a><code><span><span class="keyword">val</span> expire : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Set a key's time to live in seconds; returns <code> true </code> if timeout was set, false otherwise.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pexpire" class="anchored"><a href="#val-pexpire" class="anchor"></a><code><span><span class="keyword">val</span> pexpire : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Set a key's time to live in milliseconds; returns <code> true </code> if timeout was set, false otherwise.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-expireat" class="anchored"><a href="#val-expireat" class="anchor"></a><code><span><span class="keyword">val</span> expireat : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Set the expiration for a key as a UNIX timestamp, the time is truncated to the nearest second; returns <code> true </code> if timeout was set, <code> false </code> otherwise.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pexpireat" class="anchored"><a href="#val-pexpireat" class="anchor"></a><code><span><span class="keyword">val</span> pexpireat : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Set the expiration for a key as a UNIX timestamp in milliseconds; returns <code> true </code> if timeout was set, <code> false </code> otherwise.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-keys" class="anchored"><a href="#val-keys" class="anchor"></a><code><span><span class="keyword">val</span> keys : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Find all keys matching the given pattern.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-scan" class="anchored"><a href="#val-scan" class="anchor"></a><code><span><span class="keyword">val</span> scan : <span>?pattern:string <span class="arrow">&#45;&gt;</span></span> <span>?count:int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>(int * <span>string list</span>)</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Incrementally iterate the keys space; see tests for usage example.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-move" class="anchored"><a href="#val-move" class="anchor"></a><code><span><span class="keyword">val</span> move : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Move key to a different db; returns <code> true </code> if key was moved, <code> false </code> otherwise.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-persist" class="anchored"><a href="#val-persist" class="anchor"></a><code><span><span class="keyword">val</span> persist : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Remove timeout on key; returns <code> true </code> if timeout was removed, <code> false </code> otherwise.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-randomkey" class="anchored"><a href="#val-randomkey" class="anchor"></a><code><span><span class="keyword">val</span> randomkey : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Return a random key from the keyspace; returns <code> None </code> if db is empty.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-rename" class="anchored"><a href="#val-rename" class="anchor"></a><code><span><span class="keyword">val</span> rename : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Rename a key; raises <code>Error</code> if key doesn't exist.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-renamenx" class="anchored"><a href="#val-renamenx" class="anchor"></a><code><span><span class="keyword">val</span> renamenx : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Rename a key, only if the new key does not exist; returns <code> true </code> if key was renamed, <code> false </code> if newkey already exists.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sort" class="anchored"><a href="#val-sort" class="anchor"></a><code><span><span class="keyword">val</span> sort : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>?by:string <span class="arrow">&#45;&gt;</span></span> <span>?limit:<span>(int * int)</span> <span class="arrow">&#45;&gt;</span></span> <span>?get:<span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span>
<span>?order:<span>[&lt; `Asc <span>| `Desc</span> ]</span> <span class="arrow">&#45;&gt;</span></span> <span>?alpha:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Sort elements in a list, set or sorted set; return sorted list of items.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sort_and_store" class="anchored"><a href="#val-sort_and_store" class="anchor"></a><code><span><span class="keyword">val</span> sort_and_store : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>?by:string <span class="arrow">&#45;&gt;</span></span> <span>?limit:<span>(int * int)</span> <span class="arrow">&#45;&gt;</span></span> <span>?get:<span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span>
<span>?order:<span>[&lt; `Asc <span>| `Desc</span> ]</span> <span class="arrow">&#45;&gt;</span></span> <span>?alpha:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Sort and store elements in a list, set or sorted set; returns length of sorted items list which was stored.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-ttl" class="anchored"><a href="#val-ttl" class="anchor"></a><code><span><span class="keyword">val</span> ttl : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>int option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Time to live for a key in seconds; returns <code> None </code> if key doesn't exist or doesn't have a timeout.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pttl" class="anchored"><a href="#val-pttl" class="anchor"></a><code><span><span class="keyword">val</span> pttl : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>int option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Time to live for a key in milliseconds; returns <code> None </code> if key doesn't exist or doesn't have a timeout.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-type_of" class="anchored"><a href="#val-type_of" class="anchor"></a><code><span><span class="keyword">val</span> type_of : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>[&gt; `Hash <span>| `List</span> <span>| `None</span> <span>| `String</span> <span>| `Zset</span> ]</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Determine the type stored as key.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-dump" class="anchored"><a href="#val-dump" class="anchor"></a><code><span><span class="keyword">val</span> dump : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Return a serialized version of the value stored at the specified key; returns <code> None </code> if key doesn't exist.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-restore" class="anchored"><a href="#val-restore" class="anchor"></a><code><span><span class="keyword">val</span> restore : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Create a key with serialized value (obtained via DUMP).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-migrate" class="anchored"><a href="#val-migrate" class="anchor"></a><code><span><span class="keyword">val</span> migrate : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>?copy:bool <span class="arrow">&#45;&gt;</span></span> <span>?replace:bool <span class="arrow">&#45;&gt;</span></span>
<span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Atomically transfer a key from a source Redis instance to a destination Redis instance.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-object_refcount" class="anchored"><a href="#val-object_refcount" class="anchor"></a><code><span><span class="keyword">val</span> object_refcount : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>int option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Inspect the internals of Redis objects; returns the number of references of the value associated with the specified key.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-object_encoding" class="anchored"><a href="#val-object_encoding" class="anchor"></a><code><span><span class="keyword">val</span> object_encoding : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Inspect the internals of Redis objects; returns the kind of internal representation used in order to store the value associated with a key.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-object_idletime" class="anchored"><a href="#val-object_idletime" class="anchor"></a><code><span><span class="keyword">val</span> object_idletime : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>int option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Inspect the internals of Redis objects; returns the number of seconds since the object stored at the specified key is idle.</p></div></div><h3 id="string-commands"><a href="#string-commands" class="anchor"></a>String commands</h3><div class="odoc-spec"><div class="spec value" id="val-append" class="anchored"><a href="#val-append" class="anchor"></a><code><span><span class="keyword">val</span> append : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Append a value to a key; returns length of string after append.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-setbit" class="anchored"><a href="#val-setbit" class="anchor"></a><code><span><span class="keyword">val</span> setbit : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Sets or clears the bit at offset in the string value stored at key.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-getbit" class="anchored"><a href="#val-getbit" class="anchor"></a><code><span><span class="keyword">val</span> getbit : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Returns the bit value at offset in the string value stored at key.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-bitop" class="anchored"><a href="#val-bitop" class="anchor"></a><code><span><span class="keyword">val</span> bitop : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-bit_operation">bit_operation</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Perform a bitwise operation between multiple keys (containing string values) and store the result in the destination key. See <a href="#type-bit_operation"><code>bit_operation</code></a> type for available operations.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-bitcount" class="anchored"><a href="#val-bitcount" class="anchor"></a><code><span><span class="keyword">val</span> bitcount : <span>?first:int <span class="arrow">&#45;&gt;</span></span> <span>?last:int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Count the number of set bits (population counting) in a string.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-bitpos" class="anchored"><a href="#val-bitpos" class="anchor"></a><code><span><span class="keyword">val</span> bitpos : <span>?first:int <span class="arrow">&#45;&gt;</span></span> <span>?last:int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Return the position of the first bit set to 1 or 0 in a string.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-decr" class="anchored"><a href="#val-decr" class="anchor"></a><code><span><span class="keyword">val</span> decr : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Decrements the number stored at key by one. If the key does not exist, it is set to 0 before performing the operation.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-decrby" class="anchored"><a href="#val-decrby" class="anchor"></a><code><span><span class="keyword">val</span> decrby : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Decrements the number stored at key by decrement. If the key does not exist, it is set to 0 before performing the operation.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-get" class="anchored"><a href="#val-get" class="anchor"></a><code><span><span class="keyword">val</span> get : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Get the value of key.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-getrange" class="anchored"><a href="#val-getrange" class="anchor"></a><code><span><span class="keyword">val</span> getrange : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Returns the substring of the string value stored at key, determined by the offsets start and end (both are inclusive).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-getset" class="anchored"><a href="#val-getset" class="anchor"></a><code><span><span class="keyword">val</span> getset : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Atomically sets key to value and returns the old value stored at key. Returns <code> None </code> when key exists but does not hold a string value.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-incr" class="anchored"><a href="#val-incr" class="anchor"></a><code><span><span class="keyword">val</span> incr : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Increments the number stored at key by one. If the key does not exist, it is set to 0 before performing the operation.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-incrby" class="anchored"><a href="#val-incrby" class="anchor"></a><code><span><span class="keyword">val</span> incrby : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Increments the number stored at key by increment. If the key does not exist, it is set to 0 before performing the operation.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-incrbyfloat" class="anchored"><a href="#val-incrbyfloat" class="anchor"></a><code><span><span class="keyword">val</span> incrbyfloat : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span>float <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Increment the string representing a floating point number stored at key by the specified increment. If the key does not exist, it is set to 0 before performing the operation.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mget" class="anchored"><a href="#val-mget" class="anchor"></a><code><span><span class="keyword">val</span> mget : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>string option</span> list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Returns the values of all specified keys.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mset" class="anchored"><a href="#val-mset" class="anchor"></a><code><span><span class="keyword">val</span> mset : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(string * string)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Sets the given keys to their respective values.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-msetnx" class="anchored"><a href="#val-msetnx" class="anchor"></a><code><span><span class="keyword">val</span> msetnx : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(string * string)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Sets the given keys to their respective values. MSETNX will not perform any operation at all even if just a single key already exists.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-set" class="anchored"><a href="#val-set" class="anchor"></a><code><span><span class="keyword">val</span> set : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>?ex:int <span class="arrow">&#45;&gt;</span></span> <span>?px:int <span class="arrow">&#45;&gt;</span></span> <span>?nx:bool <span class="arrow">&#45;&gt;</span></span> <span>?xx:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Set key to hold the string value.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-setex" class="anchored"><a href="#val-setex" class="anchor"></a><code><span><span class="keyword">val</span> setex : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Set key to hold the string value and set key to timeout after a given number of seconds.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-psetex" class="anchored"><a href="#val-psetex" class="anchor"></a><code><span><span class="keyword">val</span> psetex : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>PSETEX works exactly like SETEX with the sole difference that the expire time is specified in milliseconds instead of seconds.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-setnx" class="anchored"><a href="#val-setnx" class="anchor"></a><code><span><span class="keyword">val</span> setnx : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Set key to hold string value if key does not exist.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-setrange" class="anchored"><a href="#val-setrange" class="anchor"></a><code><span><span class="keyword">val</span> setrange : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Overwrites part of the string stored at key, starting at the specified offset, for the entire length of value.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-strlen" class="anchored"><a href="#val-strlen" class="anchor"></a><code><span><span class="keyword">val</span> strlen : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Returns the length of the string value stored at key. An error is returned when key holds a non-string value.</p></div></div><h3 id="hash-commands"><a href="#hash-commands" class="anchor"></a>Hash commands</h3><div class="odoc-spec"><div class="spec value" id="val-hdel" class="anchored"><a href="#val-hdel" class="anchor"></a><code><span><span class="keyword">val</span> hdel : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Removes the specified fields from the hash stored at key. Specified fields that do not exist within this hash are ignored.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-hexists" class="anchored"><a href="#val-hexists" class="anchor"></a><code><span><span class="keyword">val</span> hexists : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Returns if field is an existing field in the hash stored at key.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-hget" class="anchored"><a href="#val-hget" class="anchor"></a><code><span><span class="keyword">val</span> hget : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Returns the value associated with field in the hash stored at key.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-hgetall" class="anchored"><a href="#val-hgetall" class="anchor"></a><code><span><span class="keyword">val</span> hgetall : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><span>(string * string)</span> list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Returns all fields and values of the hash stored at key.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-hincrby" class="anchored"><a href="#val-hincrby" class="anchor"></a><code><span><span class="keyword">val</span> hincrby : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Increments the number stored at field in the hash stored at key by increment.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-hincrbyfloat" class="anchored"><a href="#val-hincrbyfloat" class="anchor"></a><code><span><span class="keyword">val</span> hincrbyfloat : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span>float <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Increments the number stored at field in the hash stored at key by increment.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-hkeys" class="anchored"><a href="#val-hkeys" class="anchor"></a><code><span><span class="keyword">val</span> hkeys : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Returns all field names in the hash stored at key.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-hlen" class="anchored"><a href="#val-hlen" class="anchor"></a><code><span><span class="keyword">val</span> hlen : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Returns the number of fields contained in the hash stored at key.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-hmget" class="anchored"><a href="#val-hmget" class="anchor"></a><code><span><span class="keyword">val</span> hmget : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>string option</span> list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Returns the values associated with the specified fields in the hash stored at key.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-hmset" class="anchored"><a href="#val-hmset" class="anchor"></a><code><span><span class="keyword">val</span> hmset : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><span>(string * string)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Sets the specified fields to their respective values in the hash stored at key.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-hset" class="anchored"><a href="#val-hset" class="anchor"></a><code><span><span class="keyword">val</span> hset : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Sets field in the hash stored at key to value.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-hsetnx" class="anchored"><a href="#val-hsetnx" class="anchor"></a><code><span><span class="keyword">val</span> hsetnx : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Sets field in the hash stored at key to value, only if field does not yet exist.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-hstrlen" class="anchored"><a href="#val-hstrlen" class="anchor"></a><code><span><span class="keyword">val</span> hstrlen : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Get the length of the value of a hash field</p></div></div><div class="odoc-spec"><div class="spec value" id="val-hscan" class="anchored"><a href="#val-hscan" class="anchor"></a><code><span><span class="keyword">val</span> hscan : <span>?pattern:string <span class="arrow">&#45;&gt;</span></span> <span>?count:int <span class="arrow">&#45;&gt;</span></span>
<span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>(int * <span><span>(string * string)</span> list</span>)</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Incrementally iterate hash fields and associated values</p></div></div><div class="odoc-spec"><div class="spec value" id="val-hvals" class="anchored"><a href="#val-hvals" class="anchor"></a><code><span><span class="keyword">val</span> hvals : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Returns all values in the hash stored at key.</p></div></div><h3 id="list-commands"><a href="#list-commands" class="anchor"></a>List commands</h3><div class="odoc-spec"><div class="spec value" id="val-blpop" class="anchored"><a href="#val-blpop" class="anchor"></a><code><span><span class="keyword">val</span> blpop : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><span>(string * string)</span> option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Remove and get the first element in a list, or block until one is available</p></div></div><div class="odoc-spec"><div class="spec value" id="val-brpop" class="anchored"><a href="#val-brpop" class="anchor"></a><code><span><span class="keyword">val</span> brpop : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><span>(string * string)</span> option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Remove and get the last element in a list, or block until one is available</p></div></div><div class="odoc-spec"><div class="spec value" id="val-brpoplpush" class="anchored"><a href="#val-brpoplpush" class="anchor"></a><code><span><span class="keyword">val</span> brpoplpush : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Pop a value from a list, push it to another list and return it; or block until one is available</p></div></div><div class="odoc-spec"><div class="spec value" id="val-lindex" class="anchored"><a href="#val-lindex" class="anchor"></a><code><span><span class="keyword">val</span> lindex : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Get an element from a list by its index</p></div></div><div class="odoc-spec"><div class="spec value" id="val-linsert" class="anchored"><a href="#val-linsert" class="anchor"></a><code><span><span class="keyword">val</span> linsert : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>[&lt; `After <span>| `Before</span> ]</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>int option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Insert an element before or after another element in a list</p></div></div><div class="odoc-spec"><div class="spec value" id="val-llen" class="anchored"><a href="#val-llen" class="anchor"></a><code><span><span class="keyword">val</span> llen : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Get the length of a list</p></div></div><div class="odoc-spec"><div class="spec value" id="val-lpop" class="anchored"><a href="#val-lpop" class="anchor"></a><code><span><span class="keyword">val</span> lpop : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Remove and get the first element in a list</p></div></div><div class="odoc-spec"><div class="spec value" id="val-lpush" class="anchored"><a href="#val-lpush" class="anchor"></a><code><span><span class="keyword">val</span> lpush : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Prepend one or multiple values to a list</p></div></div><div class="odoc-spec"><div class="spec value" id="val-lpushx" class="anchored"><a href="#val-lpushx" class="anchor"></a><code><span><span class="keyword">val</span> lpushx : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Prepend a value to a list, only if the list exists</p></div></div><div class="odoc-spec"><div class="spec value" id="val-lrange" class="anchored"><a href="#val-lrange" class="anchor"></a><code><span><span class="keyword">val</span> lrange : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Get a range of elements from a list</p></div></div><div class="odoc-spec"><div class="spec value" id="val-lrem" class="anchored"><a href="#val-lrem" class="anchor"></a><code><span><span class="keyword">val</span> lrem : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Remove elements from a list</p></div></div><div class="odoc-spec"><div class="spec value" id="val-lset" class="anchored"><a href="#val-lset" class="anchor"></a><code><span><span class="keyword">val</span> lset : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Set the value of an element in a list by its index</p></div></div><div class="odoc-spec"><div class="spec value" id="val-ltrim" class="anchored"><a href="#val-ltrim" class="anchor"></a><code><span><span class="keyword">val</span> ltrim : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Trim a list to the specified range</p></div></div><div class="odoc-spec"><div class="spec value" id="val-rpop" class="anchored"><a href="#val-rpop" class="anchor"></a><code><span><span class="keyword">val</span> rpop : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Remove and get the last element in a list</p></div></div><div class="odoc-spec"><div class="spec value" id="val-rpoplpush" class="anchored"><a href="#val-rpoplpush" class="anchor"></a><code><span><span class="keyword">val</span> rpoplpush : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Remove the last element in a list, prepend it to another list and return it</p></div></div><div class="odoc-spec"><div class="spec value" id="val-rpush" class="anchored"><a href="#val-rpush" class="anchor"></a><code><span><span class="keyword">val</span> rpush : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Append one or multiple values to a list</p></div></div><div class="odoc-spec"><div class="spec value" id="val-rpushx" class="anchored"><a href="#val-rpushx" class="anchor"></a><code><span><span class="keyword">val</span> rpushx : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Append a value to a list, only if the list exists</p></div></div><h3 id="hyperloglog-commands"><a href="#hyperloglog-commands" class="anchor"></a>HyperLogLog commands</h3><div class="odoc-spec"><div class="spec value" id="val-pfadd" class="anchored"><a href="#val-pfadd" class="anchor"></a><code><span><span class="keyword">val</span> pfadd : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Adds values to the HyperLogLog data structure.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pfcount" class="anchored"><a href="#val-pfcount" class="anchor"></a><code><span><span class="keyword">val</span> pfcount : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Returns the approximated cardinality of the union of the HyperLogLogs passed.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pfmerge" class="anchored"><a href="#val-pfmerge" class="anchor"></a><code><span><span class="keyword">val</span> pfmerge : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Merge multiple HyperLogLog values into an unique value that will approximate the cardinality of the union of the observed Sets of the source HyperLogLog structures.</p></div></div><h3 id="set-commands"><a href="#set-commands" class="anchor"></a>Set commands</h3><div class="odoc-spec"><div class="spec value" id="val-sadd" class="anchored"><a href="#val-sadd" class="anchor"></a><code><span><span class="keyword">val</span> sadd : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Returns true if member was added, false otherwise.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-scard" class="anchored"><a href="#val-scard" class="anchor"></a><code><span><span class="keyword">val</span> scard : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-sdiff" class="anchored"><a href="#val-sdiff" class="anchor"></a><code><span><span class="keyword">val</span> sdiff : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Difference between first and all successive sets.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sdiffstore" class="anchored"><a href="#val-sdiffstore" class="anchor"></a><code><span><span class="keyword">val</span> sdiffstore : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>like sdiff, but store result in destination. returns size of result.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sinter" class="anchored"><a href="#val-sinter" class="anchor"></a><code><span><span class="keyword">val</span> sinter : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-sinterstore" class="anchored"><a href="#val-sinterstore" class="anchor"></a><code><span><span class="keyword">val</span> sinterstore : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Like SINTER, but store result in destination. Returns size of result.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sismember" class="anchored"><a href="#val-sismember" class="anchor"></a><code><span><span class="keyword">val</span> sismember : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-smembers" class="anchored"><a href="#val-smembers" class="anchor"></a><code><span><span class="keyword">val</span> smembers : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-smove" class="anchored"><a href="#val-smove" class="anchor"></a><code><span><span class="keyword">val</span> smove : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Returns true if an element was moved, false otherwise.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-spop" class="anchored"><a href="#val-spop" class="anchor"></a><code><span><span class="keyword">val</span> spop : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Remove random element from set.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-srandmember" class="anchored"><a href="#val-srandmember" class="anchor"></a><code><span><span class="keyword">val</span> srandmember : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Like SPOP, but doesn't remove chosen element.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-srem" class="anchored"><a href="#val-srem" class="anchor"></a><code><span><span class="keyword">val</span> srem : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Returns true if element was removed.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sunion" class="anchored"><a href="#val-sunion" class="anchor"></a><code><span><span class="keyword">val</span> sunion : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-sunionstore" class="anchored"><a href="#val-sunionstore" class="anchor"></a><code><span><span class="keyword">val</span> sunionstore : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Like SUNION, but store result in destination. Returns size of result.</p></div></div><h3 id="pub/sub-commands"><a href="#pub/sub-commands" class="anchor"></a>Pub/sub commands</h3><div class="odoc-spec"><div class="spec value" id="val-publish" class="anchored"><a href="#val-publish" class="anchor"></a><code><span><span class="keyword">val</span> publish : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Post a message to a channel. Returns number of clients that received the message.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pubsub_channels" class="anchored"><a href="#val-pubsub_channels" class="anchor"></a><code><span><span class="keyword">val</span> pubsub_channels : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-reply">reply</a> list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Lists the currently active channels. If no pattern is specified, all channels are listed.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pubsub_numsub" class="anchored"><a href="#val-pubsub_numsub" class="anchor"></a><code><span><span class="keyword">val</span> pubsub_numsub : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-reply">reply</a> list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Returns the number of subscribers (not counting clients subscribed to patterns) for the specified channels.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-subscribe" class="anchored"><a href="#val-subscribe" class="anchor"></a><code><span><span class="keyword">val</span> subscribe : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Subscribes the client to the specified channels.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-unsubscribe" class="anchored"><a href="#val-unsubscribe" class="anchor"></a><code><span><span class="keyword">val</span> unsubscribe : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Unsubscribes the client from the given channels, or from all of them if an empty list is given</p></div></div><div class="odoc-spec"><div class="spec value" id="val-psubscribe" class="anchored"><a href="#val-psubscribe" class="anchor"></a><code><span><span class="keyword">val</span> psubscribe : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Subscribes the client to the given patterns.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-punsubscribe" class="anchored"><a href="#val-punsubscribe" class="anchor"></a><code><span><span class="keyword">val</span> punsubscribe : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Unsubscribes the client from the given patterns.</p></div></div><h3 id="sorted-set-commands"><a href="#sorted-set-commands" class="anchor"></a>Sorted set commands</h3><div class="odoc-spec"><div class="spec value" id="val-zadd" class="anchored"><a href="#val-zadd" class="anchor"></a><code><span><span class="keyword">val</span> zadd : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>?x:<span>[&lt; `NX <span>| `XX</span> ]</span> <span class="arrow">&#45;&gt;</span></span> <span>?ch:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><span>(float * string)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Add one or more members to a sorted set, or update its score if it already exists.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-zrange" class="anchored"><a href="#val-zrange" class="anchor"></a><code><span><span class="keyword">val</span> zrange : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>?withscores:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-reply">reply</a> list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Return a range of members in a sorted set, by index.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-zrevrange" class="anchored"><a href="#val-zrevrange" class="anchor"></a><code><span><span class="keyword">val</span> zrevrange : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>?withscores:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-reply">reply</a> list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Return a reversed range of members in a sorted set, by index.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-zrangebyscore" class="anchored"><a href="#val-zrangebyscore" class="anchor"></a><code><span><span class="keyword">val</span> zrangebyscore : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>?withscores:bool <span class="arrow">&#45;&gt;</span></span> <span>?limit:<span>(int * int)</span> <span class="arrow">&#45;&gt;</span></span>
<span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="FloatBound/index.html#type-t">FloatBound.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="FloatBound/index.html#type-t">FloatBound.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-reply">reply</a> list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Return a range of members in a sorted set, by score.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-zrangebylex" class="anchored"><a href="#val-zrangebylex" class="anchor"></a><code><span><span class="keyword">val</span> zrangebylex : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>?limit:<span>(int * int)</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="StringBound/index.html#type-t">StringBound.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="StringBound/index.html#type-t">StringBound.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-reply">reply</a> list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Return a range of members in a sorted set, by lexicographical range.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-zrevrangebyscore" class="anchored"><a href="#val-zrevrangebyscore" class="anchor"></a><code><span><span class="keyword">val</span> zrevrangebyscore : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>?withscores:bool <span class="arrow">&#45;&gt;</span></span> <span>?limit:<span>(int * int)</span> <span class="arrow">&#45;&gt;</span></span>
<span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="FloatBound/index.html#type-t">FloatBound.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="FloatBound/index.html#type-t">FloatBound.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-reply">reply</a> list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Return a range of members in a sorted set, by score.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-zrevrangebylex" class="anchored"><a href="#val-zrevrangebylex" class="anchor"></a><code><span><span class="keyword">val</span> zrevrangebylex : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>?limit:<span>(int * int)</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="StringBound/index.html#type-t">StringBound.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="StringBound/index.html#type-t">StringBound.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-reply">reply</a> list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Return a range of members in a sorted set, by lexicographical range.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-zrem" class="anchored"><a href="#val-zrem" class="anchor"></a><code><span><span class="keyword">val</span> zrem : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Remove one or more members from a sorted set.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-zremrangebylex" class="anchored"><a href="#val-zremrangebylex" class="anchor"></a><code><span><span class="keyword">val</span> zremrangebylex : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="StringBound/index.html#type-t">StringBound.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="StringBound/index.html#type-t">StringBound.t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Remove all members in a sorted set between the given lexicographical range.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-zremrangebyscore" class="anchored"><a href="#val-zremrangebyscore" class="anchor"></a><code><span><span class="keyword">val</span> zremrangebyscore : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="FloatBound/index.html#type-t">FloatBound.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="FloatBound/index.html#type-t">FloatBound.t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Remove all members in a sorted set between the given score range.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-zremrangebyrank" class="anchored"><a href="#val-zremrangebyrank" class="anchor"></a><code><span><span class="keyword">val</span> zremrangebyrank : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Remove all members in a sorted set between the given rank range.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-zcard" class="anchored"><a href="#val-zcard" class="anchor"></a><code><span><span class="keyword">val</span> zcard : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Returns the sorted set cardinality (number of elements) of the sorted set stored at key.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-zincrby" class="anchored"><a href="#val-zincrby" class="anchor"></a><code><span><span class="keyword">val</span> zincrby : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>float <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Increment the score of a member in the sorted set</p></div></div><div class="odoc-spec"><div class="spec value" id="val-zscore" class="anchored"><a href="#val-zscore" class="anchor"></a><code><span><span class="keyword">val</span> zscore : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>float option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Returns the score of a member in the sorted set.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-zcount" class="anchored"><a href="#val-zcount" class="anchor"></a><code><span><span class="keyword">val</span> zcount : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="FloatBound/index.html#type-t">FloatBound.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="FloatBound/index.html#type-t">FloatBound.t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Returns the number of elements in the sorted set at key with a score between min and max.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-zlexcount" class="anchored"><a href="#val-zlexcount" class="anchor"></a><code><span><span class="keyword">val</span> zlexcount : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="StringBound/index.html#type-t">StringBound.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="StringBound/index.html#type-t">StringBound.t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Returns the number of members in a sorted set between a given lexicographical range.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-zrank" class="anchored"><a href="#val-zrank" class="anchor"></a><code><span><span class="keyword">val</span> zrank : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>int option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Returns the rank of member in the sorted set stored at key.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-zrevrank" class="anchored"><a href="#val-zrevrank" class="anchor"></a><code><span><span class="keyword">val</span> zrevrank : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>int option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Returns the reversed rank of member in the sorted set stored at key.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-zpopmin" class="anchored"><a href="#val-zpopmin" class="anchor"></a><code><span><span class="keyword">val</span> zpopmin : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><span>(string * float)</span> list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Removes and returns one or more members with the lowest scores in a sorted set.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-zpopmax" class="anchored"><a href="#val-zpopmax" class="anchor"></a><code><span><span class="keyword">val</span> zpopmax : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><span>(string * float)</span> list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Remove and return one or more members with the highest scores in a sorted set.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-bzpopmin" class="anchored"><a href="#val-bzpopmin" class="anchor"></a><code><span><span class="keyword">val</span> bzpopmin : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span><span><span>(string * string * float)</span> option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Remove and return the member with the lowest score in a sorted set, or block until one is available.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-bzpopmax" class="anchored"><a href="#val-bzpopmax" class="anchor"></a><code><span><span class="keyword">val</span> bzpopmax : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <span><span><span>(string * string * float)</span> option</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Remove and return the member with the highest score in a sorted set, or block until one is available.</p></div></div><h3 id="stream-commands"><a href="#stream-commands" class="anchor"></a>Stream commands</h3><p>For redis &gt;= 5. We only support a subset of the commands for now.</p><div class="odoc-spec"><div class="spec value" id="val-xadd" class="anchored"><a href="#val-xadd" class="anchor"></a><code><span><span class="keyword">val</span> xadd : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>?maxlen:<span>[ <span>`Exact of int</span> <span><span>| `Approximate</span> of int</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
<span>?id:string <span class="arrow">&#45;&gt;</span></span> <span><span><span>(string * string)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span>string <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Add a stream event, as a list of key-value pairs, to the given stream.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the ID of the new event</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">maxlen</span> <p>can be used to trim the stream.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">id</span> <p>specify a custom ID. Most of the of time you don't want to set this.</p><p>@see <a href="https://redis.io/commands/xadd">the official doc</a></p></li></ul><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.5</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-xdel" class="anchored"><a href="#val-xdel" class="anchor"></a><code><span><span class="keyword">val</span> xdel : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Delete specific stream events. Should be rarely useful.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the number of deleted events.</p><p>@see <a href="https://redis.io/commands/xdel">the official doc</a></p></li></ul><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.5</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-xlen" class="anchored"><a href="#val-xlen" class="anchor"></a><code><span><span class="keyword">val</span> xlen : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Length of a stream. @see https://redis.io/commands/xlen .</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.5</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-xtrim" class="anchored"><a href="#val-xtrim" class="anchor"></a><code><span><span class="keyword">val</span> xtrim : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>maxlen:<span>[ <span>`Exact of int</span> <span><span>| `Approximate</span> of int</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
<span>unit <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Trim stream to the given maximum length.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">maxlen</span> <p>the maximum number of entries to preserve, prioritizing the most recent ones. <code>`Approximate n</code> is faster, and should be preferred.</p></li></ul><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>number of deleted entries</p><p>@see <a href="https://redis.io/commands/xtrim">the official doc</a></p></li></ul><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.5</li></ul></div></div><div class="odoc-spec"><div class="spec type" id="type-stream_event" class="anchored"><a href="#type-stream_event" class="anchor"></a><code><span><span class="keyword">type</span> stream_event</span><span> = string * <span><span>(string * string)</span> list</span></span></code></div><div class="spec-doc"><p>A stream event as returned by Redis. It is composed of a stream ID (timestamp + counter), and a list of key/value pairs.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.5</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-xrange" class="anchored"><a href="#val-xrange" class="anchor"></a><code><span><span class="keyword">val</span> xrange : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>start:<a href="StringBound/index.html#type-t">StringBound.t</a> <span class="arrow">&#45;&gt;</span></span> <span>end_:<a href="StringBound/index.html#type-t">StringBound.t</a> <span class="arrow">&#45;&gt;</span></span> <span>?count:int <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-stream_event">stream_event</a> list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p><code>xrange connection stream ~start ~end_ ()</code> returns a range of events in the stream.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">start</span> <p>beginning of the range. It can be one of:</p><ul><li><code>StringBound.NegInfinity</code> (&quot;-&quot; in the doc) to indicate the earliest possible time</li><li><code>StringBound.Inclusive &quot;timestamp&quot;</code> or <code>StringBound.Inclusive &quot;timestamp-number&quot;</code> for a left-inclusive bound</li><li><code>StringBound.Exclusive &quot;timestamp&quot;</code> or <code>StringBound.Exclusive &quot;timestamp-number&quot;</code> for a left-exclusive bound (&quot;(&quot; in the doc) only since Redis 6.2</li></ul></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">end_</span> <p>same as start but for the right bound</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">count</span> <p>maximum number of events returned</p></li></ul><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>a lits of events (at most <code>count</code> if specified). Each event is a pair <code>(id, pairs)</code> where <code>id</code> is the unique ID of the event, of the form &quot;&lt;timestamp&gt;-&lt;counter&gt;&quot;, and <code>pairs</code> is a list of key-value pairs associated with the event.</p><p>@see <a href="https://redis.io/commands/xrange">the official doc</a></p></li></ul><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.5</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-xrevrange" class="anchored"><a href="#val-xrevrange" class="anchor"></a><code><span><span class="keyword">val</span> xrevrange : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>start:<a href="StringBound/index.html#type-t">StringBound.t</a> <span class="arrow">&#45;&gt;</span></span> <span>end_:<a href="StringBound/index.html#type-t">StringBound.t</a> <span class="arrow">&#45;&gt;</span></span> <span>?count:int <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-stream_event">stream_event</a> list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Like <a href="#val-xrange"><code>xrange</code></a> but in reverse order. @see <a href="https://redis.io/commands/xrevrange">the official doc</a></p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.5</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-xread" class="anchored"><a href="#val-xread" class="anchor"></a><code><span><span class="keyword">val</span> xread : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>?count:int <span class="arrow">&#45;&gt;</span></span> <span>?block_ms:int <span class="arrow">&#45;&gt;</span></span>
<span><span><span>(string * <span>[ `Last <span><span>| `After</span> of string</span> ]</span>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(string * <span><a href="#type-stream_event">stream_event</a> list</span>)</span> list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p><code>xread connection pairs</code> reads data from the multiple streams specified in <code>pairs</code>.</p><p>Each item of <code>pairs</code> is a pair <code>(&quot;stream-name&quot;, &lt;after&gt;)</code> where <code>&lt;after&gt;</code> is either:</p><ul><li><code>`Last</code> (&quot;$&quot; in the doc) to get events coming after the last current event (so, new events);</li><li>or <code>`After i</code> to get events coming after the given ID <code>i</code>, excluding <code>i</code> itself.</li></ul><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>a list of <code>(&quot;stream-name&quot;, &lt;events&gt;)</code>. Each pair contains the name of a stream (that was among the input <code>pairs</code>), along with events of that stream coming after the corresponding position.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">count</span> <p>max number of events returned <b>per stream</b></p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">block_ms</span> <p>if provided, <code>xread</code> blocks at most <code>block_ms</code> milliseconds for new events. Otherwise <code>xread</code> is synchronous and returns immediately.</p><p>@see <a href="https://redis.io/commands/xread">the official doc</a></p></li></ul><ul class="at-tags"><li class="since"><span class="at-tag">since</span> 0.5</li></ul></div></div><h3 id="transaction-commands"><a href="#transaction-commands" class="anchor"></a>Transaction commands</h3><div class="odoc-spec"><div class="spec value" id="val-multi" class="anchored"><a href="#val-multi" class="anchor"></a><code><span><span class="keyword">val</span> multi : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Marks the start of a transaction block. Subsequent commands will be queued for atomic execution using EXEC.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-exec" class="anchored"><a href="#val-exec" class="anchor"></a><code><span><span class="keyword">val</span> exec : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-reply">reply</a> list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Executes all previously queued commands in a transaction and restores the connection state to normal.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-discard" class="anchored"><a href="#val-discard" class="anchor"></a><code><span><span class="keyword">val</span> discard : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Flushes all previously queued commands in a transaction and restores the connection state to normal.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-watch" class="anchored"><a href="#val-watch" class="anchor"></a><code><span><span class="keyword">val</span> watch : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Marks the given keys to be watched for conditional execution of a transaction.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-unwatch" class="anchored"><a href="#val-unwatch" class="anchor"></a><code><span><span class="keyword">val</span> unwatch : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Flushes all the previously watched keys for a transaction.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-queue" class="anchored"><a href="#val-queue" class="anchor"></a><code><span><span class="keyword">val</span> queue : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div></div><h3 id="scripting-commands"><a href="#scripting-commands" class="anchor"></a>Scripting commands</h3><div class="odoc-spec"><div class="spec value" id="val-script_load" class="anchored"><a href="#val-script_load" class="anchor"></a><code><span><span class="keyword">val</span> script_load : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Load the specified Lua script into the script cache. Returns the SHA1 digest of the script for use with EVALSHA.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-eval" class="anchored"><a href="#val-eval" class="anchor"></a><code><span><span class="keyword">val</span> eval : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reply">reply</a> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Evaluates a script using the built-in Lua interpreter.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-evalsha" class="anchored"><a href="#val-evalsha" class="anchor"></a><code><span><span class="keyword">val</span> evalsha : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-reply">reply</a> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>Evaluates a script cached on the server side by its SHA1 digest.</p></div></div><h3 id="server"><a href="#server" class="anchor"></a>Server</h3><div class="odoc-spec"><div class="spec value" id="val-bgrewriteaof" class="anchored"><a href="#val-bgrewriteaof" class="anchor"></a><code><span><span class="keyword">val</span> bgrewriteaof : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-bgsave" class="anchored"><a href="#val-bgsave" class="anchor"></a><code><span><span class="keyword">val</span> bgsave : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-config_resetstat" class="anchored"><a href="#val-config_resetstat" class="anchor"></a><code><span><span class="keyword">val</span> config_resetstat : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-dbsize" class="anchored"><a href="#val-dbsize" class="anchor"></a><code><span><span class="keyword">val</span> dbsize : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>int <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-flushall" class="anchored"><a href="#val-flushall" class="anchor"></a><code><span><span class="keyword">val</span> flushall : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>clear all databases</p></div></div><div class="odoc-spec"><div class="spec value" id="val-flushdb" class="anchored"><a href="#val-flushdb" class="anchor"></a><code><span><span class="keyword">val</span> flushdb : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>clear current database</p></div></div><div class="odoc-spec"><div class="spec value" id="val-info" class="anchored"><a href="#val-info" class="anchor"></a><code><span><span class="keyword">val</span> info : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(string * string)</span> list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-lastsave" class="anchored"><a href="#val-lastsave" class="anchor"></a><code><span><span class="keyword">val</span> lastsave : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>float <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>last successful save as Unix timestamp</p></div></div><div class="odoc-spec"><div class="spec value" id="val-role" class="anchored"><a href="#val-role" class="anchor"></a><code><span><span class="keyword">val</span> role : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-reply">reply</a> list</span> <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>role in context of replication</p></div></div><div class="odoc-spec"><div class="spec value" id="val-save" class="anchored"><a href="#val-save" class="anchor"></a><code><span><span class="keyword">val</span> save : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>synchronous save</p></div></div><div class="odoc-spec"><div class="spec value" id="val-shutdown" class="anchored"><a href="#val-shutdown" class="anchor"></a><code><span><span class="keyword">val</span> shutdown : <span><a href="#type-connection">connection</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../argument-1-IO/index.html#type-t">IO.t</a></span></span></code></div><div class="spec-doc"><p>save and shutdown server</p></div></div><div class="odoc-spec"><div class="spec module" id="module-MassInsert" class="anchored"><a href="#module-MassInsert" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="MassInsert/index.html">MassInsert</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Batch commands for mass insertion</p></div></div></div></body></html>